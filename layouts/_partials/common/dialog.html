{{/*
Universal popup dialog partial using native <dialog> element
    Parameters:
    - header: Dialog title/header text
    - text: Dialog content/message text
    - type: Dialog type (info, warn, error, success) - determines styling
    - id: Optional unique ID for multiple dialogs (defaults to "universal-dialog")

    Usage example:
    {{ partial "common/dialog.html" (dict "header" "Success" "text" "Operation completed successfully!" "type"
    "success") }}
    */}}

    {{- $header := .header | default "Dialog" -}}
    {{- $text := .text | default "" -}}
    {{- $type := .type | default "info" -}}
    {{- $id := .id | default "universal-dialog" -}}

    <dialog id="{{ $id }}" class="dialog dialog--{{ $type }}" aria-labelledby="{{ $id }}-title"
            aria-describedby="{{ $id }}-content">
        <!-- Dialog Header -->
        <div class="dialog__header">
            <div class="dialog__icon" aria-hidden="true">
                {{- if eq $type "info" -}}
                <svg class="dialog__icon-svg" viewBox="0 0 24 24" fill="currentColor">
                    <path
                          d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,7H13V9H11V7M11,11H13V17H11V11Z" />
                </svg>
                {{- else if eq $type "warn" -}}
                <svg class="dialog__icon-svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z" />
                </svg>
                {{- else if eq $type "error" -}}
                <svg class="dialog__icon-svg" viewBox="0 0 24 24" fill="currentColor">
                    <path
                          d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z" />
                </svg>
                {{- else if eq $type "success" -}}
                <svg class="dialog__icon-svg" viewBox="0 0 24 24" fill="currentColor">
                    <path
                          d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z" />
                </svg>
                {{- end -}}
            </div>
            <h3 id="{{ $id }}-title" class="dialog__title">{{ $header }}</h3>
            <button class="dialog__close" type="button" aria-label="Закрыть диалог">
                <svg class="dialog__close-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path
                          d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                </svg>
            </button>
        </div>

        <!-- Dialog Content -->
        <div id="{{ $id }}-content" class="dialog__content">
            <p class="dialog__text">{{ $text | markdownify }}</p>
        </div>

        <!-- Dialog Actions -->
        <div class="dialog__actions">
            <button class="dialog__button dialog__button--primary" type="button">
                OK
            </button>
        </div>
    </dialog>